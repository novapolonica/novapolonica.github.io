!function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){t()}function s(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n)}function r(t){t.parentNode.removeChild(t)}function o(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function c(t,e,n,s){t.addEventListener(e,n,s)}function u(t,e,n,s){t.removeEventListener(e,n,s)}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function d(t,e,n){t.classList[n?"add":"remove"](e)}function f(t){return t}function m(e,s,i,r,o){let a,l,c,u=i.call(e,s,r),h=!1;return{t:o?0:1,running:!1,program:null,pending:null,run(t,e){"function"==typeof u?p.wait().then(()=>{u=u(),this._run(t,e)}):this._run(t,e)},_run(e,n){a=u.duration||300,l=u.easing||f;const i={start:window.performance.now()+(u.delay||0),b:e,callback:n||t};o&&!h&&(u.css&&u.delay&&(c=s.style.cssText,s.style.cssText+=u.css(0,1)),u.tick&&u.tick(0,1),h=!0),e||(i.group=g.current,g.current.remaining+=1),u.delay?this.pending=i:this.start(i),this.running||(this.running=!0,p.add(this))},start(t){if(e.fire(`${t.b?"intro":"outro"}.start`,{node:s}),t.a=this.t,t.delta=t.b-t.a,t.duration=a*Math.abs(t.b-t.a),t.end=t.start+t.duration,u.css){u.delay&&(s.style.cssText=c);const e=function({a:t,b:e,delta:n,duration:s},i,r){const o=16.666/s;let a="{\n";for(let e=0;e<=1;e+=o){const s=t+n*i(e);a+=100*e+`%{${r(s,1-s)}}\n`}return a+`100% {${r(e,1-e)}}\n}`}(t,l,u.css);p.addRule(e,t.name="__svelte_"+function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(e)),s.style.animation=(s.style.animation||"").split(", ").filter(e=>e&&(t.delta<0||!/__svelte/.test(e))).concat(`${t.name} ${t.duration}ms linear 1 forwards`).join(", ")}this.program=t,this.pending=null},update(t){const e=this.program;if(!e)return;const n=t-e.start;this.t=e.a+e.delta*l(n/e.duration),u.tick&&u.tick(this.t,1-this.t)},done(){const t=this.program;this.t=t.b,u.tick&&u.tick(this.t,1-this.t),e.fire(`${t.b?"intro":"outro"}.end`,{node:s}),t.b||t.invalidated?u.css&&p.deleteRule(s,t.name):(t.group.callbacks.push(()=>{t.callback(),u.css&&p.deleteRule(s,t.name)}),0==--t.group.remaining&&t.group.callbacks.forEach(n)),this.running=!!this.pending},abort(t){this.program&&(t&&u.tick&&u.tick(1,0),u.css&&p.deleteRule(s,this.program.name),this.program=this.pending=null,this.running=!1)},invalidate(){this.program&&(this.program.invalidated=!0)}}}let g={};var p={running:!1,transitions:[],bound:null,stylesheet:null,activeRules:{},promise:null,add(t){this.transitions.push(t),this.running||(this.running=!0,requestAnimationFrame(this.bound||(this.bound=this.next.bind(this))))},addRule(t,e){if(!this.stylesheet){const t=a("style");document.head.appendChild(t),p.stylesheet=t.sheet}this.activeRules[e]||(this.activeRules[e]=!0,this.stylesheet.insertRule(`@keyframes ${e} ${t}`,this.stylesheet.cssRules.length))},next(){this.running=!1;const t=window.performance.now();let e=this.transitions.length;for(;e--;){const n=this.transitions[e];n.program&&t>=n.program.end&&n.done(),n.pending&&t>=n.pending.start&&n.start(n.pending),n.running?(n.update(t),this.running=!0):n.pending||this.transitions.splice(e,1)}if(this.running)requestAnimationFrame(this.bound);else if(this.stylesheet){let t=this.stylesheet.cssRules.length;for(;t--;)this.stylesheet.deleteRule(t);this.activeRules={}}},deleteRule(t,e){t.style.animation=t.style.animation.split(", ").filter(t=>t&&-1===t.indexOf(e)).join(", ")},wait:()=>(p.promise||(p.promise=Promise.resolve(),p.promise.then(()=>{p.promise=null})),p.promise)};function _(){return Object.create(null)}function v(t){t._lock=!0,y(t._beforecreate),y(t._oncreate),y(t._aftercreate),t._lock=!1}function y(t){for(;t&&t.length;)t.shift()()}var b={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var s=0;s<n.length;s+=1){var i=n[s];if(!i.__calling)try{i.__calling=!0,i.call(this,e)}finally{i.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||v(this.root)},_recompute:t,_set:function(t){var n=this._state,s={},i=!1;for(var r in t=e(this._staged,t),this._staged={},t)this._differs(t[r],n[r])&&(s[r]=i=!0);i&&(this._state=e(e({},n),t),this._recompute(s,this._state),this._bind&&this._bind(s,this._state),this._fragment&&(this.fire("state",{changed:s,current:this._state,previous:n}),this._fragment.p(s,this._state),this.fire("update",{changed:s,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function k(t,e){var n=e.delay;void 0===n&&(n=0);var s=e.duration;void 0===s&&(s=400);var i=+getComputedStyle(t).opacity;return{delay:n,duration:s,css:function(t){return"opacity: "+t*i}}}const w=[11,12,13,21,22,23,31,32,33];let x=1;function R(t=!1){const e=document.querySelector("cardslots").getBoundingClientRect();w.forEach(n=>{const s=document.getElementById("slot_"+n).getBoundingClientRect(),i=document.querySelector(`card[pos='${n}']`);i.style.top=`${s.top-e.top+5}px`,i.style.left=`${s.left-e.left+5}px`,t&&(i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style["background-size"]=`${e.width}px ${e.height}px`)})}function S(){let t=++x;setTimeout(()=>{if(t!=x)return;const e=document.querySelector("cardslots"),n=e.getBoundingClientRect();e.setAttribute("style",`height:${n.width}px;`);const s=document.querySelector("cards");s.classList.remove("animated"),R(!0);let i=++x;setTimeout(()=>{i==x&&s.classList.add("animated")},50)},50)}var $={onCardClick(t){const{shuffling:e,shuffled:n}=this.get();e||(n?setTimeout(this.moveCard(t),50):this.set({shuffled:!0}))},moveCard(t){const e=document.querySelector("#card_"+t),n=document.querySelector("#card_11"),s=e.getAttribute("pos"),i=n.getAttribute("pos"),r=Math.abs(parseInt(i)-parseInt(s));10!=r&&1!=r||(n.setAttribute("pos",s),e.setAttribute("pos",i),i==t?e.classList.remove("miss"):e.classList.add("miss"),setTimeout(()=>{this.checkIfShuffled()},500),R())},shuffle(){const{shuffled:t}=this.get();t||(this.set({shuffled:!0,shuffling:!0}),setTimeout(()=>{const t=[...w],e=10+Math.floor(80*Math.random()),n={0:[3,1],1:[0,4,2],2:[1,5],3:[0,4,6],4:[3,1,5,7],5:[4,2,8],6:[3,7],7:[6,4,8],8:[7,5]};let s=0,i=0;for(let r=0;r<e;r++){const e=n[s].filter(t=>t!=i);i=s;let r=t[s=e[Math.floor(Math.random()*e.length)]];t[s]=t[i],t[i]=r}t.forEach((t,e)=>{const n=w[e],s=document.querySelector("#card_"+t);s.setAttribute("pos",n),t!=n&&11!=t&&s.classList.add("miss")}),R(),setTimeout(()=>{this.set({shuffling:!1})},500)},500))},checkIfShuffled(){document.querySelectorAll("card.miss").length||this.set({shuffled:!1})},onResize(){S()}};function C(){S()}function q(t){const{component:e,ctx:n}=this._svelte;e.onCardClick(n.card)}function A(t,e,n){const s=Object.create(t);return s.card=e[n],s}function E(t,e,n){const s=Object.create(t);return s.slot=e[n],s}function L(t,e){var n,c,u,h,f,m,p;function _(e){t.onResize()}window.addEventListener("resize",_);for(var v=e.slots,y=[],b=0;b<v.length;b+=1)y[b]=z(t,E(e,v,b));var k=e.cards,w=[];for(b=0;b<k.length;b+=1)w[b]=T(t,A(e,k,b));var x=!e.shuffled&&N(t,e);return{c(){n=a("game"),c=a("board"),u=a("cardslots");for(var t=0;t<y.length;t+=1)y[t].c();h=l("\n\n        "),f=a("cards");for(t=0;t<w.length;t+=1)w[t].c();m=l("\n\n        "),x&&x.c(),u.className="svelte-131tc93",f.className="animated svelte-131tc93",c.className="svelte-131tc93",d(c,"shuffling",e.shuffling),n.className="noselect svelte-131tc93"},m(t,e){i(t,n,e),s(n,c),s(c,u);for(var r=0;r<y.length;r+=1)y[r].m(u,null);s(c,h),s(c,f);for(r=0;r<w.length;r+=1)w[r].m(f,null);s(c,m),x&&x.i(c,null),p=!0},p(e,n){if(e.slots){v=n.slots;for(var s=0;s<v.length;s+=1){const i=E(n,v,s);y[s]?y[s].p(e,i):(y[s]=z(t,i),y[s].c(),y[s].m(u,null))}for(;s<y.length;s+=1)y[s].d(1);y.length=v.length}if(e.cards){k=n.cards;for(s=0;s<k.length;s+=1){const i=A(n,k,s);w[s]?w[s].p(e,i):(w[s]=T(t,i),w[s].c(),w[s].m(f,null))}for(;s<w.length;s+=1)w[s].d(1);w.length=k.length}n.shuffled?x&&(g.current={remaining:0,callbacks:[]},x.o(function(){x.d(1),x=null})):(x||(x=N(t,n)).c(),x.i(c,null)),e.shuffling&&d(c,"shuffling",n.shuffling)},i(t,e){p||this.m(t,e)},o(t){p&&(x?x.o(t):t(),p=!1)},d(t){window.removeEventListener("resize",_),t&&r(n),o(y,t),o(w,t),x&&x.d()}}}function z(t,e){var n,s;return{c(){(n=a("cardslot")).id=s="slot_"+e.slot,n.className="svelte-131tc93"},m(t,e){i(t,n,e)},p(t,e){t.slots&&s!==(s="slot_"+e.slot)&&(n.id=s)},d(t){t&&r(n)}}}function T(t,e){var n,s,o;return{c(){(n=a("card"))._svelte={component:t,ctx:e},c(n,"click",q),n.id=s="card_"+e.card,h(n,"pos",o=e.card),n.className="svelte-131tc93",d(n,"miss",!1)},m(t,e){i(t,n,e)},p(t,i){e=i,n._svelte.ctx=e,t.cards&&s!==(s="card_"+e.card)&&(n.id=s),t.cards&&o!==(o=e.card)&&h(n,"pos",o)},d(t){t&&r(n),u(n,"click",q)}}}function N(t,e){var n,s,o;function l(e){t.shuffle()}return{c(){(n=a("button")).textContent="Shuffle",c(n,"click",l),n.className="shuffle svelte-131tc93"},m(t,e){i(t,n,e),o=!0},i(e,i){o||(t.root._intro&&(s&&s.invalidate(),t.root._aftercreate.push(()=>{s||(s=m(t,n,k,{},!0)),s.run(1)})),this.m(e,i))},o(e){o&&(s||(s=m(t,n,k,{},!1)),s.run(0,()=>{e(),s=null}),o=!1)},d(t){t&&r(n),u(n,"click",l),t&&s&&s.abort()}}}function F(t){!function(t,e){t._handlers=_(),t._slots=_(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}(this,t),this._state=e({slots:w,cards:w,shuffled:!1,shuffling:!1},t.data),this._intro=!!t.intro,this._handlers.update=[C],this._fragment=L(this,this._state),this.root._oncreate.push(()=>{(function(){S(),setTimeout(S,200)}).call(this),this.fire("update",{changed:function(t,e){for(var n in e)t[n]=1;return t}({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),v(this)),this._intro=!0}e(F.prototype,b),e(F.prototype,$);var M=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},j=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};new F({target:document.querySelector("#cells")});!function(t,e,n){var s=j({minFontSize:-1/0,maxFontSize:1/0},n),i=function(t){var n=e||1,i=function(){t.style.fontSize=Math.max(Math.min(t.clientWidth/(10*n),parseFloat(s.maxFontSize)),parseFloat(s.minFontSize))+"px"};i(),M(window,"resize",i),M(window,"orientationchange",i)};if(t.length)for(var r=0;r<t.length;r++)i(t[r]);else i(t)}(document.querySelector(".title h1"))}();
